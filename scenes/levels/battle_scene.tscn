[gd_scene load_steps=10 format=3 uid="uid://bcc4ea6baq4mq"]

[ext_resource type="Script" uid="uid://blwyr6s3hoy0c" path="res://scenes/levels/battle_scene.gd" id="1_6a6ir"]
[ext_resource type="PackedScene" uid="uid://mqf25vmd4yyl" path="res://entities/nexus/nexus.tscn" id="2_6b61y"]
[ext_resource type="Texture2D" uid="uid://bm63mpsvjyyog" path="res://assets/Background/Background Ground ( darker ).png" id="2_emqap"]
[ext_resource type="PackedScene" uid="uid://yey23xnr0h7w" path="res://components/random_audio_player/random_audio_player_component.tscn" id="2_smbrp"]
[ext_resource type="AudioStream" uid="uid://bcgca3x3m4mao" path="res://assets/SFX/system/end_turn.wav" id="3_xuffl"]
[ext_resource type="Texture2D" uid="uid://l1j0i3abask5" path="res://assets/battle_scene/foreground.png" id="4_a0jns"]
[ext_resource type="Texture2D" uid="uid://cwiwig2kmyyr1" path="res://assets/Background/ForeGround Left.png" id="6_2bu30"]
[ext_resource type="Texture2D" uid="uid://cvd4sesmxcjhw" path="res://assets/Background/ForeGround Right.png" id="6_k8b4e"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_skhqt"]
vertices = PackedVector2Array(652.039, 178.969, 652.953, 395.953, -5, 393.039, -5, 177.023)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-15, 167, 662, 169, 663, 406, -15, 403)])

[node name="BattleScene" type="Node2D" groups=["battle_scene"]]
script = ExtResource("1_6a6ir")
min_enemy_count = 7

[node name="ResetNavigationTimer" type="Timer" parent="."]
wait_time = 1.8
one_shot = true

[node name="RoundEndSFXPlayer" parent="." instance=ExtResource("2_smbrp")]
volume_db = 10.0
streams = Array[AudioStream]([ExtResource("3_xuffl")])

[node name="Background" type="Node2D" parent="."]

[node name="Sprite2D" type="Sprite2D" parent="Background"]
position = Vector2(-124, -13)
scale = Vector2(1.27183, 1.07485)
texture = ExtResource("2_emqap")
centered = false

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
position = Vector2(0, -147)
navigation_polygon = SubResource("NavigationPolygon_skhqt")

[node name="Wall" type="Node2D" parent="."]

[node name="StaticBody2D" type="StaticBody2D" parent="Wall"]
collision_layer = 64
collision_mask = 0

[node name="CollisionShape2D" type="CollisionPolygon2D" parent="Wall/StaticBody2D"]
position = Vector2(-6, 11)
build_mode = 1
polygon = PackedVector2Array(-9, 15, 677, 17, 680, 242, -9, 243)

[node name="PlayerNexus" parent="." groups=["player_nexus"] instance=ExtResource("2_6b61y")]
position = Vector2(82, 134)
collision_mask = 2
health = 30

[node name="Sprite2D" type="Sprite2D" parent="PlayerNexus"]
show_behind_parent = true
position = Vector2(-82, -134)
texture = ExtResource("4_a0jns")
centered = false
region_enabled = true
region_rect = Rect2(0, 0, 216, 314)

[node name="EnemyNexus" parent="." groups=["enemy_nexus"] instance=ExtResource("2_6b61y")]
position = Vector2(555, 134)
health = 30
ally = false

[node name="Sprite2D" type="Sprite2D" parent="EnemyNexus"]
show_behind_parent = true
position = Vector2(-142, -134)
texture = ExtResource("4_a0jns")
centered = false
region_enabled = true
region_rect = Rect2(284, 0, 228, 315)

[node name="DeathLayer" type="Node2D" parent="." groups=["death_layer"]]

[node name="PlayerLayer" type="Node2D" parent="." groups=["player_layer"]]
position = Vector2(0, -147)

[node name="EnemyLayer" type="Node2D" parent="."]
position = Vector2(0, -147)

[node name="SpawnPositions" type="Node2D" parent="."]
position = Vector2(0, -147)

[node name="PlayerMarker" type="Marker2D" parent="SpawnPositions"]
unique_name_in_owner = true
position = Vector2(173, 293)

[node name="EnemyMarker" type="Marker2D" parent="SpawnPositions"]
unique_name_in_owner = true
position = Vector2(474, 291)

[node name="UILayer" type="Node2D" parent="." groups=["ui_layer"]]

[node name="ForeGroundRight" type="Sprite2D" parent="."]
position = Vector2(576, 265)
texture = ExtResource("6_k8b4e")

[node name="ForeGroundLeft" type="Sprite2D" parent="."]
position = Vector2(64, 288)
texture = ExtResource("6_2bu30")
